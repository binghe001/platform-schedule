<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:util="http://www.springframework.org/schema/util"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
		http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd">

    <util:constant id="callBackCmd"
                   static-field="com.courage.platform.schedule.rpc.protocol.CommandEnum.CALLBACK_SCHEDULE_RESULT_CMD"/>

    <util:constant id="registerCmd"
                   static-field="com.courage.platform.schedule.rpc.protocol.CommandEnum.REGISTER_CMD"/>

    <util:constant id="otherTriggerTaskCmd"
                   static-field="com.courage.platform.schedule.rpc.protocol.CommandEnum.OTHER_TRIGGER_SCHEDULE_TASK_CMD"/>


    <!-- 回调结果处理器  -->
    <bean id="callbackResultProcessor"
          class="com.courage.platform.schedule.server.rpc.processor.CallbackResultProcessor"></bean>

    <!-- 注册处理器 -->
    <bean id="registerProcessor"
          class="com.courage.platform.schedule.server.rpc.processor.RegisterProcessor"></bean>

    <!-- 控制台调用触发任务 -->
    <bean id="otherTriggerTaskProcessor" class="com.courage.platform.schedule.server.rpc.processor.RegulateProcessor"></bean>

    <bean id="channelListener" class="com.courage.platform.schedule.server.rpc.RpcChannelListener">
    </bean>

    <!-- 调度rpc server -->
    <bean id="scheduleRpcServer" class="com.courage.platform.schedule.rpc.ScheduleRpcServer" init-method="start"
          destroy-method="shutdown">
        <property name="processorTable">
            <map>
                <entry key-ref="callBackCmd" value-ref="callbackResultProcessor"/>
                <entry key-ref="registerCmd" value-ref="registerProcessor"/>
                <entry key-ref="otherTriggerTaskCmd" value-ref="otherTriggerTaskProcessor"/>
            </map>
        </property>
        <property name="platformChannelEventListener" ref="channelListener" />
    </bean>

</beans>
