<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.courage.platform.schedule.dao.ScheduleJobLogDao" >

    <resultMap id="scheduleJobLog" type="com.courage.platform.schedule.dao.domain.ScheduleJobLog" >
        <result column="id" property="id" />
        <result column="job_id" property="jobId" />
        <result column="app_id" property="appId" />
        <result column="trigger_status" property="triggerStatus"/>
        <result column="trigger_time" property="triggerTime" />
        <result column="callback_status" property="callbackStatus" />
        <result column="callback_time" property="callbackTime" />
        <result column="message" property="message" />
        <result column="create_time" property="createTime" />
        <result column="update_time" property="updateTime" />
    </resultMap>

    <sql id="scheduleLogColumnList">
        `id`,
        `job_id`,
        `app_id`,
        `trigger_status`,
        `trigger_time`,
        `callback_status`,
        `callback_time`,
        `message`,
        `create_time`,
        `update_time`
	</sql>

    <insert id="insert" parameterType="com.courage.platform.schedule.dao.domain.ScheduleJobLog">
        INSERT INTO `t_schedule_job_log`
        (`id`,
        `job_id`,
        `app_id`,
        `trigger_status`,
        `message`,
        `trigger_time`,
        `create_time`,
        `update_time`)
        VALUES
        (
         #{id},
         #{jobId},
         #{appId},
         #{triggerStatus},
         #{message},
         #{triggerTime},
         now(),
         now()
        )
    </insert>

    <update id="update" parameterType="map">
        update t_schedule_job_log
        set
        callback_time = #{callbackTime} ,
        callback_status = #{callbackStatus},
        message = #{message},
        update_time = now()
        where id = #{id}
    </update>

</mapper>